<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: Workflow</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Class: Workflow</h1>

    




<section>

<header>
    
        <h2><span class="attribs"><span class="type-signature"></span></span>Workflow<span class="signature">(name, id, steps, custom)</span><span class="type-signature"></span></h2>
        
            <div class="class-description">The main workflow execution class,
defined by the given definitions file.

Initial state is pending, until `start()` is called.
Hooks will not run when pending.

Next step is defined either by `next` being defined in the current step
or by user explicitly set the name or index of the step.
It's up to you to handle permissions for any of these methods.

Emits various events, see the respective method documentation.</div>
        
    
</header>

<article>
    <div class="container-overview">
    
        

    
    <h2>Constructor</h2>
    

    
    <h4 class="name" id="Workflow"><span class="type-signature"></span>new Workflow<span class="signature">(name, id, steps, custom)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Creates a new instance. Any properties in the definitions, hat are not
one of name, id or steps are considered "custom" and are (optionally) handled
by their respective extensions (if registered).
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>name</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">name of the workflow</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>id</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">identifier of this instance of the workflow (in case you run multiple of the same)</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>steps</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last">the workflows step definitions</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>custom</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last">contains all custom properties of this workflow's definitions</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="Tinyflow.js.html">Tinyflow.js</a>, <a href="Tinyflow.js.html#line299">line 299</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li>{<a href="global.html#Tinyflow#.create">Tinyflow.create</a>}</li>
        </ul>
    </dd>
    

    
</dl>













<h5>Throws:</h5>

        

<dl>
    <dt>
        <div class="param-desc">
        if steps are not defined or have length of 0
        </div>
    </dt>
    <dd></dd>
    <dt>
        <dl>
            <dt>
                Type
            </dt>
            <dd>
                
<span class="param-type"><a href="TinyflowError.html">TinyflowError</a></span>


            </dd>
        </dl>
    </dt>
    <dd></dd>
</dl>


    







    
    </div>

    

    

    
        <h3 class="subsection-title">Classes</h3>

        <dl>
            <dt><a href="Workflow.html">Workflow</a></dt>
            <dd></dd>
        </dl>
    

    

    

    

    
        <h3 class="subsection-title">Members</h3>

        
            
<h4 class="name" id="current"><span class="type-signature"></span>current<span class="type-signature"> :<a href="Step.html">Step</a>|null</span></h4>




<div class="description">
    The current step
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type"><a href="Step.html">Step</a></span>
|

<span class="param-type">null</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="Tinyflow.js.html">Tinyflow.js</a>, <a href="Tinyflow.js.html#line363">line 363</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id="cancel"><span class="type-signature"></span>cancel<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Completes the workflow but also wiped it's data
and sets state as "cancelled"
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="Tinyflow.js.html">Tinyflow.js</a>, <a href="Tinyflow.js.html#line490">line 490</a>
    </li></ul></dd>
    

    

    

    
</dl>





<h5>Fires:</h5>
<ul>
    <li>end - the workflow has ended,event: see the state property for in which state it ended</li>
</ul>
















        
            

    

    
    <h4 class="name" id="complete"><span class="type-signature"></span>complete<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Completes the workflow, sets the current step to null
and the state to "complete".
Does not delete the workflow data as opposed to the cancel event
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="Tinyflow.js.html">Tinyflow.js</a>, <a href="Tinyflow.js.html#line475">line 475</a>
    </li></ul></dd>
    

    

    

    
</dl>





<h5>Fires:</h5>
<ul>
    <li>end - the workflow has ended,event: see the state property for in which state it ended</li>
</ul>
















        
            

    

    
    <h4 class="name" id="start"><span class="type-signature"></span>start<span class="signature">(if<span class="signature-attributes">opt</span>)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Starts the workflow, runs through all extensions.
Extensions are caught in a separate Microtask (Promise.catch) and will
not cause the workflow start to cancel.
Sets thw workflow state to "active"
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>if</code></td>
            

            <td class="type">
            
                
<span class="param-type">autoStep</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">set to false it will not automatically step into the first available step</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="Tinyflow.js.html">Tinyflow.js</a>, <a href="Tinyflow.js.html#line375">line 375</a>
    </li></ul></dd>
    

    

    

    
</dl>





<h5>Fires:</h5>
<ul>
    <li>started - when the workflow instance has successfully started (state became 'active')</li>
</ul>









<h5>Throws:</h5>

        

<dl>
    <dt>
        <div class="param-desc">
        if the state is other than "pending"
        </div>
    </dt>
    <dd></dd>
    <dt>
        <dl>
            <dt>
                Type
            </dt>
            <dd>
                
<span class="param-type"><a href="TinyflowError.html">TinyflowError</a></span>


            </dd>
        </dl>
    </dt>
    <dd></dd>
</dl>


    







        
            

    

    
    <h4 class="name" id="step"><span class="type-signature"></span>step<span class="signature">(indexOrName, options<span class="signature-attributes">opt</span>)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Sets a given step by name or index as the new current one.
This method is for manually setting the next step.
If you want the engine to automatically set the next step you
should rather end the current step using step.complete or step.cancel

When a new step is set, the current step will be disposed properly,
so you don't have to do it.

Will listen to the new step's "end" event and automatically
determine the next step to choose or to end the workflow.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>indexOrName</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>
|

<span class="param-type">number</span>
|

<span class="param-type">null</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">index of the step in linear flows or name of the step in non-linear flows</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>options</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>stepId</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">an optional</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>autoOnEnd</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">set to true to prevent workflow from automatically handling the next step
  if the current step ends</td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="Tinyflow.js.html">Tinyflow.js</a>, <a href="Tinyflow.js.html#line418">line 418</a>
    </li></ul></dd>
    

    

    

    
</dl>





<h5>Fires:</h5>
<ul>
    <li>event:step - when the new step is properly set up and active</li>
</ul>









<h5>Throws:</h5>

        

<dl>
    <dt>
        <div class="param-desc">
        if no step is found by index or name
        </div>
    </dt>
    <dd></dd>
    <dt>
        <dl>
            <dt>
                Type
            </dt>
            <dd>
                
<span class="param-type"><a href="TinyflowError.html">TinyflowError</a></span>


            </dd>
        </dl>
    </dt>
    <dd></dd>
</dl>


    







        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Emitter.html">Emitter</a></li><li><a href="Step.html">Step</a></li><li><a href="TinyflowError.html">TinyflowError</a></li><li><a href="Workflow.html">Workflow</a></li></ul><h3>Global</h3><ul><li><a href="global.html#Tinyflow">Tinyflow</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Wed Feb 21 2024 15:30:44 GMT+0100 (Central European Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>