<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Home</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Home</h1>

    



    


    <h3> </h3>










    




    <section>
        <article><h1>Tinyflow</h1>
<p><img src="https://github.com/chartonomy/tinyflowjs/workflows/Test%20suite/badge.svg" alt="Test suite">
<a href="https://github.com/chartonomy/tinyflowjs/actions/workflows/publish.yml"><img src="https://github.com/chartonomy/tinyflowjs/actions/workflows/publish.yml/badge.svg" alt="Build and publish"></a>
<a href="https://standardjs.com"><img src="https://img.shields.io/badge/code_style-standard-brightgreen.svg" alt="JavaScript Style Guide"></a>
<a href="https://www.repostatus.org/#active"><img src="https://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active ‚Äì The project has reached a stable, usable state and is being actively developed."></a>
<img src="https://img.shields.io/github/license/chartonomy/tinyflowjs" alt="GitHub"></p>
<p>A lightweight workflow engine for all runtimes.
Highly extensive with minimal core and no dependencies.</p>
<h2>Features</h2>
<ul>
<li>works with many JavaScript runtimes that support at least ES6 and Promises</li>
<li>minimal core (xyzkb minified)</li>
<li>very easy to use API</li>
<li>highly extensible; writing an extension is a real no-brainer</li>
<li>use declarative workflows and enrich them with custom functionality</li>
</ul>
<h2>Installation</h2>
<h2>Usage</h2>
<p>Internally there are two classes, <code>Workflow</code> and <code>Step</code> that act for the whole engine.</p>
<h3>Events</h3>
<table>
<thead>
<tr>
<th>Class</th>
<th>Name</th>
<th>Info</th>
<th>Data</th>
</tr>
</thead>
<tbody>
<tr>
<td>Workflow</td>
<td><code>started</code></td>
<td>fired when the workflow has started, after all extensions were executed without error</td>
<td></td>
</tr>
<tr>
<td>Workflow</td>
<td><code>step</code></td>
<td>fired when a new step has entered</td>
<td></td>
</tr>
<tr>
<td>Workflow</td>
<td><code>end</code></td>
<td>fired when the workflow ended; read the workflow state to know whether it ended by complete or by cancel</td>
<td></td>
</tr>
<tr>
<td>Workflow</td>
<td><code>error</code></td>
<td>fired when an error has been caught</td>
<td></td>
</tr>
</tbody>
</table>
<h3>Examples</h3>
<h4>A simple log extension</h4>
<pre class="prettyprint source lang-js"><code>Tinyflow.use('log', ({ workflow, step }) => {
  if (workflow) {
    workflow.on('')
  }
  if (step) {
    
  }
})
</code></pre>
<h4>Restore</h4>
<pre class="prettyprint source lang-js"><code>const restore = (definitions, snapshot) => {
  if (instances.has(snapshot.id)) {
    throw new TinyflowError(`There is already an active workflow by id ${snapshot.id}`)
  }

  const instanceId = snapshot.id
  const wfOptions = { instanceId }
  const wf = Tinyflow.create(definitions, wfOptions)
  wf.start()
  wf.step(snapshot.current.name, { stepId: snapshot.current.id })

  if (typeof snapshot.current.data === 'object') {
    wf.current.update(snapshot.current.data)
  }

  return wf
}
</code></pre>
<h2>API Documentation</h2>
<h2>Covered environments</h2>
<p>Our goal is to Tinyflow executable in as many environments as possible.
The following list shows, what's currently covered:</p>
<table>
<thead>
<tr>
<th>Environment</th>
<th>latest versions</th>
<th>known issues</th>
</tr>
</thead>
<tbody>
<tr>
<td>Node.js</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Deno</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Bun</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Cloudflare workers</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Browser</th>
<th>tested versions</th>
<th>known issues</th>
</tr>
</thead>
<tbody>
<tr>
<td>Chrome</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Safari</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Safari (iOS)</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Firefox</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Opera</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Android Webview</td>
<td></td>
<td></td>
</tr>
<tr>
<td>...</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h2>Contribution and Development</h2>
<p>We provide an <a href="./CONTRIBUTING.md">extensive contribution guideline</a> and a <a href="./CODE_OF_CONDUCT.md">code of conduct</a>
to help you in making your contribution a success!</p>
<h3>Tools / stack</h3>
<ul>
<li>üó™ <a href="https://babeljs.io/">Babel</a> for transpiling</li>
<li>ü™Ñ <a href="https://standardjs.com/">Standard</a> for linting</li>
<li>‚öóÔ∏è <a href="https://mochajs.org/">Mocha</a> and <a href="https://www.chaijs.com">Chai</a> for testing</li>
<li>üîç <a href="https://github.com/bcoe/c8">c8</a> for code coverage</li>
<li>üìö <a href="https://jsdoc.app/">JSDoc</a> for documentation and <a href="https://www.npmjs.com/package/jsdoc-to-markdown">jsdoc-to-markdown</a> to create docs as markdown files</li>
<li>‚ö° <a href="https://github.com/features/actions">GitHub actions</a> for continuous integration</li>
<li>üì¶ <a href="https://rollupjs.org">Rollup</a> for bundling</li>
</ul>
<p>All tools are defined as <strong><code>dev-dependencies</code></strong>!</p>
<h3>Development scripts</h3>
<p>We provide a default set of dev-tools via npm scripts. Run a script via</p>
<pre class="prettyprint source lang-shell"><code>$ npm run &lt;command>
</code></pre>
<p>where <code>&lt;command&gt;</code> is one of the following available commands:</p>
<table>
<thead>
<tr>
<th>command</th>
<th>description</th>
<th>output</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>lint</code></td>
<td>runs the linter in read-mode</td>
<td></td>
</tr>
<tr>
<td><code>lint:fix</code></td>
<td>runs the linter; fixes minor issues automatically</td>
<td></td>
</tr>
<tr>
<td><code>test</code></td>
<td>runs the tests once</td>
<td></td>
</tr>
<tr>
<td><code>test:watch</code></td>
<td>runs the tests; re-runs them on code changes</td>
<td></td>
</tr>
<tr>
<td><code>test:coverage</code></td>
<td>runs the tests once and creates a coverage report</td>
<td><code>coverage</code></td>
</tr>
<tr>
<td><code>docs</code></td>
<td>creates API documentation</td>
<td><code>docs</code></td>
</tr>
<tr>
<td><code>build</code></td>
<td>builds the bundles for several target platforms</td>
<td><code>dist</code></td>
</tr>
<tr>
<td><code>build:full</code></td>
<td>runs <code>build</code> and <code>docs</code></td>
<td>see above</td>
</tr>
</tbody>
</table>
<h2>Security</h2>
<p>Please read our <a href="./SECURITY.md">security policy</a> to get to know which versions are covered.</p>
<h2>License</h2>
<p>MIT, see <a href="LICENSE">license file</a></p></article>
    </section>






</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Emitter.html">Emitter</a></li><li><a href="Step.html">Step</a></li><li><a href="TinyflowError.html">TinyflowError</a></li><li><a href="Workflow.html">Workflow</a></li></ul><h3>Global</h3><ul><li><a href="global.html#Tinyflow">Tinyflow</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Wed Feb 21 2024 15:30:44 GMT+0100 (Central European Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>